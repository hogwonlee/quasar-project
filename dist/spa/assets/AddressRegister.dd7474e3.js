import{Q as C}from"./QSpace.6f5676c6.js";import{_ as U,B as S,r as h,C as T,bi as R,E as y,Y as D,H as a,G as o,a3 as V,a4 as p,Z as u,a0 as f,aB as m,Q as c,au as r,b1 as _,F as N,a2 as $,av as I,bf as E,$ as P,b2 as b}from"./index.ada2875e.js";import{Q}from"./QToolbar.52affd72.js";import{a as B}from"./QTable.4eff6611.js";import{C as v}from"./ClosePopup.c42c576a.js";import{a as w}from"./axios.37d53be1.js";import{a as i}from"./alert.a17e1165.js";import{c as A}from"./index.72c2906b.js";import"./QChip.f7745b3c.js";import"./selection.4bf381df.js";import"./QItemSection.df21efd2.js";import"./use-fullscreen.bfc8d5eb.js";const q=S({name:"AddressRegister",data(){return{recipient:"",recipient_phone:"",address_tag:"",post_code:"",address1:"",address2:"",address3:"",keyword:"",checked:h(!0),addr_search_api_card:h(!1),outdoorpassword:"",doorScretKey:"free"}},setup(){return{selected:h([])}},computed:{...T({user:e=>e.user.USER,api_addr:e=>e.api_addr.api_address,selected_local:e=>e.ui_local.status})},watch:{selected:function(e){e!=""&&R.create({title:"\uBC30\uC1A1\uC9C0 \uC120\uD0DD",message:"\uC774 \uBC30\uC1A1\uC9C0\uAC00 \uB9DE\uC2B5\uB2C8\uAE4C?",cancel:!0,persistent:!0}).onOk(l=>{console.log("data? "+l),document.getElementById("daum_postCode").value=e[0].zipNo,document.getElementById("daum_addr").value=e[0].roadAddrPart1,document.getElementById("daum_extraAddr").value=e[0].roadAddrPart2,this.$store.dispatch("api_addr/emptyAddressAction"),this.keyword="",this.addr_search_api_card=!1}).onCancel(()=>{})},checked:function(e){console.log("\uAE30\uBCF8 \uC8FC\uC18C \uC120\uD0DD \uBCC0\uACBD: "+e)}},methods:{checkSearchedWord(e){if(e.length>0){var l=/[%=><]/;if(l.test(e.value)==!0)return i.confirm("\uC624\uB958","\uD2B9\uC218\uBB38\uC790\uB97C \uC785\uB825 \uD560\uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),e.value=e.value.split(l).join(""),!1;for(var s=new Array("OR","SELECT","INSERT","DELETE","UPDATE","CREATE","DROP","EXEC","UNION","FETCH","DECLARE","TRUNCATE"),n="",t=0;t<s.length;t++)if(n=new RegExp(s[t],"gi"),n.test(e.value))return i.confirm("\uC624\uB958",'"'+s[t]+'"\uC640(\uACFC) \uAC19\uC740 \uD2B9\uC815\uBB38\uC790\uB85C \uAC80\uC0C9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.'),e.value=e.value.replace(n,""),!1}return!0},search_addr_api(e,l){!this.checkSearchedWord(e)||jQuery.ajax({url:"https://business.juso.go.kr/addrlink/addrLinkApiJsonp.do",type:"POST",data:{confmKey:"U01TX0FVVEgyMDIzMDgwOTEyNTE0NzExNDAwMTg=",currentPage:1,countPerPage:5,keyword:e,resultType:"json"},dataType:"jsonp",crossDomain:!0,success:function(s){let n=s.results.common.errorCode,t=s.results.common.errorMessage;n=="0"?s!=null&&(s.results.common.totalCount>0?(l.dispatch("api_addr/emptyAddressAction"),s.results.juso.forEach(g=>{l.dispatch("api_addr/loadAddressAction",g)})):console.log("\uC870\uD68C\uB41C \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.")):i.confirm("\uC694\uCCAD\uC131\uACF5Error:",t)},error:function(s,n,t){i.confirm("\uC694\uCCAD\uC2E4\uD328Error: \uC5D0\uB7EC\uBC1C\uC0DD")}})},exeAddrRegister(){if(this.user.USER_ID!=""){const e={address_tag:this.address_tag,recipient:this.recipient,recipient_phone:this.recipient_phone,post_code:document.getElementById("daum_postCode").value,address1:document.getElementById("daum_addr").value,address2:document.getElementById("daum_extraAddr").value,address3:this.address3,gate_password:this.doorScretKey=="free"?"":this.outdoorpassword,user_id:this.user.USER_ID,is_default:this.checked};w({url:`${A.server}/addressRegister`,method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/json",authorization:this.user.USER_TOKEN},data:e}).then(l=>{l.status==200?(this.reload_addr_info(),i.confirm(this.selected_local.notice,this.selected_local.addrresistersuccess)):i.confirm(this.selected_local.err,this.selected_local.err+": "+l.data.content)}).catch(l=>console.log("\uC5D0\uB7EC: "+l))}else i.confirm(this.selected_local.notice,this.selected_local.needloginfirst)},reload_addr_info(){w({url:`${A.server}/addressInfo`,method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/json",authorization:this.user.USER_TOKEN},data:{user_id:this.user.USER_ID,user_name:this.user.USER_NAME}}).then(e=>{e.status==200?(this.$store.dispatch("address/emptyAddressAction"),e.data.results.forEach(l=>{l.address_active===1&&this.$store.dispatch("address/addAddressAction",l)}),this.$store.dispatch("address/setStatusAction",null)):i.confirm(this.selected_local.err,this.selected_local.err+": "+e.data.content)}).catch(e=>{console.log("\uC5D0\uB7EC:"+e)})}}}),z={class:"q-pl-sm text-h6 text-bold"},K={class:"row"},O={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},M={class:"text-subtitle2"},H={class:"text-caption"},L={class:"row q-ma-sm q-py-sm"};function F(e,l,s,n,t,g){return y(),D("div",null,[a(V,{class:"bg-white"},{default:o(()=>[a(p,{class:"row items-center q-pa-none"},{default:o(()=>[u("div",z,f(e.selected_local.registernewaddr),1),a(C),m(a(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[v]])]),_:1}),a(r,{standout:"",dense:"",outlined:"",modelValue:e.recipient,"onUpdate:modelValue":l[0]||(l[0]=d=>e.recipient=d),class:"q-ma-sm",label:e.selected_local.recipient,hint:e.selected_local.recipienthint,"lazy-rules":"",rules:[d=>!!d&&d.length<=20||"\u8BF7\u8F93\u5165\u6536\u4EF6\u4EBA\u59D3\u540D\uFF08\u5C0F\u4E8E20\u5B57\u8282\uFF09"]},null,8,["modelValue","label","hint","rules"]),a(r,{standout:"",dense:"",outlined:"",class:"q-ma-sm",modelValue:e.recipient_phone,"onUpdate:modelValue":l[1]||(l[1]=d=>e.recipient_phone=d),label:e.selected_local.recipientphone,hint:e.selected_local.telhint,type:"tel",mask:"(###)####-####","lazy-rules":"",rules:[d=>!!d&&d.length>=13&&d.length<=15||e.selected_local.telhint]},null,8,["modelValue","label","hint","rules"]),u("div",K,[a(c,{class:"q-ma-sm col",outline:"",color:"positive",label:e.selected_local.postcoderegister,onClick:l[2]||(l[2]=d=>e.addr_search_api_card=!e.addr_search_api_card)},null,8,["label"]),a(r,{standout:"",dense:"",modelValue:e.post_code,"onUpdate:modelValue":l[3]||(l[3]=d=>e.post_code=d),filled:"",class:"q-ma-sm col",for:"daum_postCode",placeholder:e.selected_local.postcodeandhint,readonly:"",disable:""},null,8,["modelValue","placeholder"])]),m(a(p,null,{default:o(()=>[a(Q,{class:"text-white rounded-borders"},{default:o(()=>[a(c,{round:"",dense:"",flat:"",icon:"arrow_back",color:"positive",class:"q-mr-xs",onClick:l[4]||(l[4]=d=>e.addr_search_api_card=!e.addr_search_api_card)}),a(r,{standout:"",dense:"",label:e.selected_local.search_addr,style:{width:"100%"},modelValue:e.keyword,"onUpdate:modelValue":l[7]||(l[7]=d=>e.keyword=d)},{append:o(()=>[e.keyword!==""?(y(),N($,{key:0,name:"close",onClick:l[5]||(l[5]=d=>e.keyword=""),class:"cursor-pointer"})):I("",!0),a(c,{icon:"search",round:"",onClick:l[6]||(l[6]=d=>e.search_addr_api(e.keyword,this.$store))})]),_:1},8,["label","modelValue"])]),_:1}),a(B,{rows:e.api_addr,"row-key":"roadAddrPart1",grid:"","hide-header":"","hide-no-data":"",selection:"single",selected:e.selected,"onUpdate:selected":l[8]||(l[8]=d=>e.selected=d)},{item:o(d=>[u("div",O,[a(V,{flat:"",bordered:""},{default:o(()=>[a(p,{class:"text-center row justify-start"},{default:o(()=>[a(E,{modelValue:d.selected,"onUpdate:modelValue":k=>d.selected=k,label:d.row.zipNo,color:"positive"},null,8,["modelValue","onUpdate:modelValue","label"]),u("div",M,f(d.row.roadAddrPart1+" "+d.row.roadAddrPart2),1),u("div",H,f(d.row.jibunAddr),1)]),_:2},1024)]),_:2},1024)])]),_:1},8,["rows","selected"]),m(a(p,null,{default:o(()=>[P(" * \u5173\u952E\u8BCD\u793A\u4F8B\uFF1A\uB3C4\uB85C\uBA85(\uBC18\uD3EC\uB300\uB85C (\u7A7A\u683C)58), \uAC74\uBB3C\uBA85(\uB3C5\uB9BD\uAE30\uB150\uAD00), \uC9C0\uBC88(\uC0BC\uC131\uB3D9 (\u7A7A\u683C)25) ")]),_:1},512),[[_,e.api_addr.length<=0]])]),_:1},512),[[_,e.addr_search_api_card]]),a(r,{standout:"",dense:"","v-model":e.address1,filled:"",class:"q-ma-sm",for:"daum_addr",placeholder:e.selected_local.addrandhint,readonly:"",disable:""},null,8,["v-model","placeholder"]),a(r,{standout:"",dense:"",modelValue:e.address2,"onUpdate:modelValue":l[9]||(l[9]=d=>e.address2=d),filled:"",class:"q-ma-sm",for:"daum_extraAddr",readonly:"",disable:"",placeholder:e.selected_local.addrdetailandhint},null,8,["modelValue","placeholder"]),a(r,{standout:"",dense:"",outlined:"",modelValue:e.address3,"onUpdate:modelValue":l[10]||(l[10]=d=>e.address3=d),class:"q-ma-sm",for:"daum_detailAddress",hint:e.selected_local.addrextraandhint,label:e.selected_local.addrextra,"lazy-rules":"",rules:[d=>!!d||"\u8BF7\u8F93\u5165\u697C\u680B\u623F\u53F7\u4FE1\u606F"]},null,8,["modelValue","hint","label","rules"]),a(r,{standout:"",dense:"",outlined:"",class:"q-ma-sm",modelValue:e.address_tag,"onUpdate:modelValue":l[11]||(l[11]=d=>e.address_tag=d),label:e.selected_local.addrtag,hint:e.selected_local.addrtagandhint,"lazy-rules":"",rules:[d=>!!d&&d.length<=20||"\u8BF7\u8F93\u5165\u4EFB\u610F\u4EE3\u79F0\uFF08\u5C0F\u4E8E20\u5B57\u8282\uFF09"]},null,8,["modelValue","label","hint","rules"]),u("div",L,[a(b,{class:"col-6",color:"positive",modelValue:e.doorScretKey,"onUpdate:modelValue":l[12]||(l[12]=d=>e.doorScretKey=d),val:"free",label:e.selected_local.gate_free},null,8,["modelValue","label"]),a(b,{class:"col-6",color:"positive",modelValue:e.doorScretKey,"onUpdate:modelValue":l[13]||(l[13]=d=>e.doorScretKey=d),val:"password",label:e.selected_local.gate_password},null,8,["modelValue","label"]),a(r,{standout:"",dense:"",class:"col-12",disable:e.doorScretKey!="password",outlined:"",modelValue:e.outdoorpassword,"onUpdate:modelValue":l[14]||(l[14]=d=>e.outdoorpassword=d),label:e.selected_local.gate_password,"lazy-rules":"",rules:[d=>!!d||"\u8BF7\u8F93\u5165\u9644\u52A0\u4FE1\u606F"]},null,8,["disable","modelValue","label","rules"]),a(E,{class:"col-6","left-label":"",modelValue:e.checked,"onUpdate:modelValue":l[15]||(l[15]=d=>e.checked=d),label:e.selected_local.defaultaddr,color:"positive"},null,8,["modelValue","label"]),m(a(c,{class:"col-6",outline:"",color:"positive",style:{width:"50%"},label:e.selected_local.addrresister,disable:e.address_tag==""||e.recipient==""||e.recipient_phone==""||e.recipient_phone.length<13||e.selected=="",onClick:e.exeAddrRegister},null,8,["label","disable","onClick"]),[[v]])])]),_:1})])}var se=U(q,[["render",F]]);export{se as default};
