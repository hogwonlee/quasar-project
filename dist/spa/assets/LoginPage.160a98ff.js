import{C as y,D as v,r as a,_ as V,F as _,$ as C,I as t,H as i,ae as k,a0 as g,a8 as $,a9 as r,Y as w,aa as f,Q as h,a5 as U,aL as b,E as N,a1 as Q,bd as R}from"./index.c0b776bf.js";import{Q as S}from"./QForm.1e582c38.js";import{C as P}from"./ClosePopup.35a4e490.js";import{a as m}from"./axios.37d53be1.js";import{a as u}from"./alert.cb544509.js";import{c}from"./index.9615a2b7.js";const q=y({computed:{...v({selected_local:e=>e.ui_local.status})},methods:{onSubmit(){const e={user_id:this.userId,user_pw:this.userPw,user_name:this.userNickname,user_phone:this.userPhone};m({url:`${c.server}/register`,method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/json"},data:e}).then(l=>{l.status==200?u.confirm(this.selected_local.notice,this.selected_local.signupcomplete):l.status==400&&u.confirm(this.selected_local.notice,this.selected_local.duplicate_id_warning)}).catch(l=>{l.status==400&&u.confirm(this.selected_local.notice,this.selected_local.duplicate_id_warning)})},onReset(){this.userId=null,this.userPw=null}},data:function(){return{userNickname:a(null),userPw:a(null),userPwCheck:a(null),userId:a(null),userPhone:a(null),ispwd:a(!0)}}}),D={class:"text-h6"},O={class:"row justify-center q-gutter-sm q-py-sm"};function z(e,l,d,o,p,I){return _(),C("div",null,[t(U,{class:"bg-white text-black"},{default:i(()=>[t(k,null,{default:i(()=>[g("div",D,$(e.selected_local.signup),1)]),_:1}),t(S,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:i(()=>[t(r,{for:"user_id",filled:"",modelValue:e.userId,"onUpdate:modelValue":l[0]||(l[0]=s=>e.userId=s),label:e.selected_local.identity,hint:e.selected_local.idhint,"lazy-rules":"",rules:[s=>!!s&&s.length>=6&&s.length<=12||e.selected_local.idhint]},null,8,["modelValue","label","hint","rules"]),t(r,{for:"user_name",filled:"",modelValue:e.userNickname,"onUpdate:modelValue":l[1]||(l[1]=s=>e.userNickname=s),label:e.selected_local.name,hint:e.selected_local.namehint,"lazy-rules":"",rules:[s=>!!s&&s.length>0||e.selected_local.namehint]},null,8,["modelValue","label","hint","rules"]),t(r,{filled:"",modelValue:e.userPhone,"onUpdate:modelValue":l[2]||(l[2]=s=>e.userPhone=s),label:e.selected_local.tel,hint:e.selected_local.telhint,type:"tel",mask:"(###)####-####","lazy-rules":"",rules:[s=>!!s&&s.length>=13&&s.length<=15||e.selected_local.telhint]},null,8,["modelValue","label","hint","rules"]),t(r,{filled:"",modelValue:e.userPw,"onUpdate:modelValue":l[4]||(l[4]=s=>e.userPw=s),type:e.ispwd?"password":"text",label:e.selected_local.password,hint:e.selected_local.passwordhint,"lazy-rules":"",rules:[s=>!!s&&s.length>=8&&s.length<=16||e.selected_local.passwordhint]},{append:i(()=>[t(w,{name:e.ispwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[3]||(l[3]=s=>e.ispwd=!e.ispwd)},null,8,["name"])]),_:1},8,["modelValue","type","label","hint","rules"]),t(r,{filled:"",modelValue:e.userPwCheck,"onUpdate:modelValue":l[6]||(l[6]=s=>e.userPwCheck=s),type:e.ispwd?"password":"text",label:e.selected_local.matchpassword,hint:e.selected_local.matchpasswordhint,"lazy-rules":"",rules:[s=>!!s&&s==this.userPw||e.selected_local.matchpasswordhint]},{append:i(()=>[t(w,{name:e.ispwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[5]||(l[5]=s=>e.ispwd=!e.ispwd)},null,8,["name"])]),_:1},8,["modelValue","type","label","hint","rules"]),g("div",O,[f(t(h,{label:e.selected_local.signup,class:"col-5",type:"submit",color:"positive",outline:"",disable:e.userPw!=e.userPwCheck||e.userId==null||e.userPw==null||e.userNickname==null||e.userPhone==null||e.userPwCheck==null||e.userId.length<6||e.userId.length>12||e.userPhone.length<13||e.userPhone.length>15||e.userPw.length<8||e.userPw.length>16},null,8,["label","disable"]),[[P]]),f(t(h,{label:e.selected_local.cancel,class:"col-5",color:"negative",outline:""},null,8,["label"]),[[P]])])]),_:1},8,["onSubmit","onReset"])]),_:1})])}var L=V(q,[["render",z]]);const A=y({components:{SignUpPage:L},data(){return{userPw:"",userId:""}},computed:{...v({user:e=>e.user.USER,address:e=>e.address.items.all,selected_local:e=>e.ui_local.status})},methods:{show_forget_pw(){u.confirm(this.selected_local.forget_pw_title,this.selected_local.forget_pw_body)},async serverLogin(){const e={user_id:this.userId,user_pw:this.userPw};let l=await m({url:`${c.server}/login`,method:"POST",data:e}).then(o=>{if(console.log("\uC751\uB2F5 status: "+o.status),o.status==200){b.create({position:"top",message:o.data.results[0].user_name+" \uB2D8 \uC548\uB155\uD558\uC138\uC694!",color:"green"});var p=o.data;console.log("\uC751\uB2F5 response: "+JSON.stringify(o.data.results[0])),this.auto_login?p.user_pw=e.user_pw:p.user_pw="",this.$store.dispatch("user/loginAction",{data:p,that:this})}else o.status==400&&u.confirm(o.data.msg,this.selected_local.wrongpw+": ["+this.selected_local.identity+": "+e.user_id+"] ["+this.selected_local.password+": "+e.user_pw+"]"+err)}).catch(o=>{console.log("\uC751\uB2F5 status: "+o+JSON.stringify(o)),u.confirm(this.selected_local.notice,this.selected_local.wrongpw+": ["+this.selected_local.identity+": "+e.user_id+"] ["+this.selected_local.password+": "+e.user_pw+"]"+o)});if(this.user.USER_ID==""){console.log("\uC0DD\uC131 let res: "+JSON.stringify(l));var d=l.data;this.auto_login?d.user_pw=e.user_pw:d.user_pw="",this.$store.dispatch("user/loginAction",{data:d,that:this})}},onReset(){userId.value=null,userPw.value=null,accept.value=!1},googleLogin(){b.create({position:"top",message:"google login",color:"green"}),window.location.href=`${c.server}/auth/google`,window.location.href="https://accounts.google.com/o/oauth2/auth?client_id=&redirect_uri=http://localhost:9000/__/auth/handler&response_type=code&&scope=email profile"},fetchUser(){m.get(`${c.server}/user`,{withCredentials:!0}).then(e=>{this.user=e.data,console.log("\uAD6C\uAE00\uB85C\uADF8\uC778\uC815\uBCF4: "+this.user+JSON.stringify(this.user))}).catch(()=>{this.user=null})},logout(){m.get(`${c.server}/logout`,{withCredentials:!0}).then(()=>{this.user=null})}},created(){},setup(){return{accept:a(!1),isPwd:a(!0),signUpWindow:a(!1),auto_login:a(!0)}}}),B={class:"q-pa-xs q-gutter-sm"},E={class:"text-h6"},J={class:"q-gutter-xs q-py-xs"};function W(e,l,d,o,p,I){const s=N("SignUpPage");return _(),C("div",B,[t(U,{class:"bg-white text-black"},{default:i(()=>[t(k,null,{default:i(()=>[g("div",E,$(e.selected_local.login),1)]),_:1}),t(S,{onReset:e.onReset,class:"q-gutter-md"},{default:i(()=>[t(r,{filled:"",modelValue:e.userId,"onUpdate:modelValue":l[0]||(l[0]=n=>e.userId=n),label:e.selected_local.identity},null,8,["modelValue","label"]),t(r,{filled:"",modelValue:e.userPw,"onUpdate:modelValue":l[2]||(l[2]=n=>e.userPw=n),label:e.selected_local.password,type:e.isPwd?"password":"text"},{append:i(()=>[t(w,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[1]||(l[1]=n=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","label","type"]),t(R,{modelValue:e.auto_login,"onUpdate:modelValue":l[3]||(l[3]=n=>e.auto_login=n),label:e.selected_local.auto_login,color:"positive"},null,8,["modelValue","label"]),g("div",J,[t(h,{label:e.selected_local.login,color:"positive",outline:"",onClick:e.serverLogin},null,8,["label","onClick"]),t(h,{label:e.selected_local.forgetpw,color:"positive",outline:"",onClick:e.show_forget_pw},null,8,["label","onClick"]),t(h,{label:e.selected_local.signup,onClick:l[4]||(l[4]=n=>this.signUpWindow=!0),color:"positive",outline:""},null,8,["label"])])]),_:1},8,["onReset"])]),_:1}),t(Q,{modelValue:e.signUpWindow,"onUpdate:modelValue":l[5]||(l[5]=n=>e.signUpWindow=n),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[t(s)]),_:1},8,["modelValue"])])}var M=V(A,[["render",W]]);export{M as default};
