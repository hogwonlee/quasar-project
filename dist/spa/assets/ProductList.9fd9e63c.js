import{c as Z,r as g,a as B,w as q,W as ie,X as ue,e as ce,o as ee,p as de,h as p,K as te,l as fe,Y as E,f as G,t as M,Z as O,s as ge,$ as J,a0 as me,j as oe,a1 as ae,a2 as he,a3 as ve,g as be,a4 as se,Q as b,a5 as ye,_ as pe,B as we,C as _e,D as Se,E as m,a6 as S,a7 as v,H as c,G as f,a8 as ke,a9 as x,aa as qe,F as C,ab as Ce,ac as Be,ad as R,ae as j,af as Pe,ag as Qe,ah as F,ai as $e,aj as De,ak as Ie,al as xe}from"./index.0ac8c13c.js";import{Q as K}from"./QSpace.2bd7416a.js";import{Q as Ve}from"./QBar.64fb72ae.js";import{Q as Ae,a as V,b as Le,c as Ee}from"./QChip.04bf467a.js";import{Q as Ne,a as Te}from"./QPageContainer.c07755e6.js";import{Q as ze,a as He}from"./QItemSection.b39b4514.js";import{Q as Me}from"./QBadge.ded94180.js";import{C as Oe}from"./ClosePopup.c974a392.js";import{P as Re}from"./ProductInfo.cce65a95.js";import{a as X}from"./axios.37d53be1.js";import{c as Y}from"./index.72c2906b.js";import"./selection.c141f8cf.js";import"./QImg.d71337e4.js";import"./QToolbarTitle.0979b46c.js";import"./QToolbar.d5314959.js";const{passive:k}=fe;var je=Z({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:l}){const n=g(!1),a=g(!0),i=g(null),y=g(null);let r=e.initialIndex||0,o,u;const A=B(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function w(){if(e.disable===!0||n.value===!0||a.value===!1)return;const d=E(o),h=M(o),I=J(o);e.reverse===!1?Math.round(h+I+e.offset)>=Math.round(d)&&P():Math.round(h)<=e.offset&&P()}function P(){if(e.disable===!0||n.value===!0||a.value===!1)return;r++,n.value=!0;const d=E(o);l("load",r,h=>{a.value===!0&&(n.value=!1,G(()=>{if(e.reverse===!0){const I=E(o),re=M(o),le=I-d;O(o,re+le)}h===!0?Q():i.value&&i.value.closest("body")&&u()}))})}function T(){r=0}function L(){a.value===!1&&(a.value=!0,o.addEventListener("scroll",u,k)),w()}function Q(){a.value===!0&&(a.value=!1,n.value=!1,o.removeEventListener("scroll",u,k),u!==void 0&&u.cancel!==void 0&&u.cancel())}function $(){if(o&&a.value===!0&&o.removeEventListener("scroll",u,k),o=ge(i.value,e.scrollTarget),a.value===!0){if(o.addEventListener("scroll",u,k),e.reverse===!0){const d=E(o),h=J(o);O(o,d-h)}w()}}function z(d){r=d}function D(d){d=parseInt(d,10);const h=u;u=d<=0?w:me(w,isNaN(d)===!0?100:d),o&&a.value===!0&&(h!==void 0&&o.removeEventListener("scroll",h,k),o.addEventListener("scroll",u,k))}function _(d){if(s.value===!0){if(y.value===null){d!==!0&&G(()=>{_(!0)});return}const h=`${n.value===!0?"un":""}pauseAnimations`;Array.from(y.value.getElementsByTagName("svg")).forEach(I=>{I[h]()})}}const s=B(()=>e.disable!==!0&&a.value===!0);q([n,s],()=>{_()}),q(()=>e.disable,d=>{d===!0?Q():L()}),q(()=>e.reverse,()=>{n.value===!1&&a.value===!0&&w()}),q(()=>e.scrollTarget,$),q(()=>e.debounce,D);let H=!1;ie(()=>{H!==!1&&o&&O(o,H)}),ue(()=>{H=o?M(o):!1}),ce(()=>{a.value===!0&&o.removeEventListener("scroll",u,k)}),ee(()=>{D(e.debounce),$(),n.value===!1&&_()});const ne=oe();return Object.assign(ne.proxy,{poll:()=>{u!==void 0&&u()},trigger:P,stop:Q,reset:T,resume:L,setIndex:z,updateScrollTarget:$}),()=>{const d=de(t.default,[]);return s.value===!0&&d[e.reverse===!1?"push":"unshift"](p("div",{ref:y,class:A.value},te(t.loading))),p("div",{class:"q-infinite-scroll",ref:i},d)}}});const Fe=Object.keys(ae);function Ue(e){return Fe.reduce((t,l)=>{const n=e[l];return n!==void 0&&(t[l]=n),t},{})}var We=Z({name:"QBtnDropdown",props:{...ae,...he,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:l}){const{proxy:n}=oe(),a=g(e.modelValue),i=g(null),y=ve(),r=B(()=>{const s={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":y.value,"aria-label":e.toggleAriaLabel||n.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(s["aria-disabled"]="true"),s}),o=B(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=B(()=>be(e)),A=B(()=>Ue(e));q(()=>e.modelValue,s=>{i.value!==null&&i.value[s?"show":"hide"]()}),q(()=>e.split,_);function w(s){a.value=!0,l("beforeShow",s)}function P(s){l("show",s),l("update:modelValue",!0)}function T(s){a.value=!1,l("beforeHide",s)}function L(s){l("hide",s),l("update:modelValue",!1)}function Q(s){l("click",s)}function $(s){ye(s),_(),l("click",s)}function z(s){i.value!==null&&i.value.toggle(s)}function D(s){i.value!==null&&i.value.show(s)}function _(s){i.value!==null&&i.value.hide(s)}return Object.assign(n,{show:D,hide:_,toggle:z}),ee(()=>{e.modelValue===!0&&D()}),()=>{const s=[p(se,{class:o.value,name:e.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&s.push(p(Ae,{ref:i,id:y.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:P,onBeforeHide:T,onHide:L},t.default)),e.split===!1?p(b,{class:"q-btn-dropdown q-btn-dropdown--simple",...A.value,...r.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:Q},{default:()=>te(t.label,[]).concat(s),loading:t.loading}):p(Ne,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[p(b,{class:"q-btn-dropdown--current",...A.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:t.label,loading:t.loading}),p(b,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...r.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>s)])}}});const{offset:N}=Pe,{getScrollTarget:U,setVerticalScrollPosition:W}=Qe,Ge=we({name:"ProductList",components:{ProductInfo:Re},data:function(){return{showing_products:[]}},watch:{products(e){e&&e.length>0&&this.showing_products.length===0&&(this.showing_products=e.slice(0,24),this.page=1)}},methods:{go_prev_category(){var e=this.category[0].category,t=0,l=-9999;this.category.forEach(i=>{N(document.querySelector("."+i.category)).top<0&&(t=N(document.querySelector("."+i.category)).top,t>l&&(l=t,e=i.category))});let n=U(document.querySelector("."+e));const a=300;W(n,document.querySelector("."+e).offsetTop-50,a)},go_next_category(){var e,t=0,l=9999;this.category.forEach(i=>{N(document.querySelector("."+i.category)).top>100&&(t=N(document.querySelector("."+i.category)).top,t<l&&(l=t,e=i.category))});let n=U(document.querySelector("."+e));const a=300;W(n,document.querySelector("."+e).offsetTop-50,a)},handleScroll(e){let t=document.querySelector("."+e),l=U(t),n=t.offsetTop-50;W(l,n,300)},setproductbuyoption(e,t){e.buyoption=t},async products_update(e,t){if(this.products.length===0){t();return}const l=this.showing_products.length,n=this.products.slice(l,l+24);if(n.length===0){this.hasMore=!1,t(!0);return}this.showing_products.push(...n),t()}},computed:{..._e({checkoutStatus:e=>e.cart.checkoutStatus,category:e=>e.category.items,products:e=>e.products.all,storeversion:e=>e.products.version,products_status:e=>e.products.status,selected_local:e=>e.ui_local.status})},mounted(){this.products&&this.products.length>0&&(this.showing_products=this.products.slice(0,Math.max(24,this.showing_products.length))),X.get(`${Y.server}/storeVersion`).then(e=>{const t=Number(e.data.results),l=Number(this.storeversion);if(console.log("\uC0C1\uC810\uBC84\uC804: "+t+" / results"+JSON.stringify(e.data.results)+"/ \uB85C\uCEEC\uBC84\uC804: "+this.storeversion+"\uD50C\uB7EC\uC2A4 \uACC4\uC0B0: "+t+this.storeversion),console.log("\uD0C0\uC785 \uD655\uC778:",typeof dbVersion,typeof l),t>l||this.products.length===0){this.showing_products=[],this.$store.dispatch("products/emptyStoreAction"),this.$store.dispatch("products/getVersionAction",t);const n={list_index_min:0,list_index_max:2e4};try{X({url:`${Y.server}/productList`,method:"GET",params:n}).then(a=>{a.data.results.length>0?a.data.results.map(i=>{this.$store.dispatch("products/getProductAction",i)}):console.log("error: \uC5C5\uB370\uC774\uD2B8 \uBC1B\uC744 \uC0C1\uD488\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.")}).catch(a=>{a.response?a.response.status===400?console.error("Error 400: Bad Request. Check your request parameters (params).",a.response.data):console.error(`Error ${a.response.status}:`,a.response.data):a.request?console.error("No response received from the server. Please check your network connection."):console.error("Error during request setup:",a.message)})}catch(a){console.error("Error fetching products:",a)}}else console.log("\uC774\uBBF8 \uBAA8\uB4E0 \uC0C1\uD488\uC744 \uAC00\uC838\uC654\uC2B5\uB2C8\uB2E4.")}).catch(e=>{console.error("Error fetching products:",e)})},setup(){const e=g(null),t=g(!0);return{childbuyoption:g("one"),keyword:g(""),event_fab:g(!1),visible:g(!0),showSimulatedReturnData:g(!1),list_col_number:g(4),searchDialog:g(!1),page:g(0),infiniteScroll:e,hasMore:t}}}),Je={class:"fixed-top-right z-top q-ma-xs row q-gutter-sm"},Ke={class:"text-h2"},Xe={class:"text-orange text-bold row justify-center"},Ye={key:0},Ze={key:1,class:"text-positive"},et={class:"q-gutter-md row inline"},tt=v("div",null,"\uC911\uAD6D\uC2DD\uD488\uC628\uB77C\uC778",-1),ot=v("div",null,"\uC774\uD638\uAD8C",-1),at=v("div",null,"010-8492-0526",-1),st=v("div",null,"306-37-32411",-1),nt=v("div",null,"\uACBD\uAE30\uB3C4 \uBD80\uCC9C\uC2DC \uC6D0\uBBF8\uAD6C \uBD80\uCC9C\uB85C47\uBC88\uAE38 9, \uC911\uC559\uC790\uC720\uC2DC\uC7A5 15\uD638",-1);function rt(e,t,l,n,a,i){const y=Se("ProductInfo");return m(),S("div",null,[v("div",Je,[c(b,{icon:"search",size:"12px",flat:"",outline:"",onClick:t[0]||(t[0]=r=>e.searchDialog=!0)})]),c(Be,{class:"z-max",modelValue:e.searchDialog,"onUpdate:modelValue":t[4]||(t[4]=r=>e.searchDialog=r),position:"top"},{default:f(()=>[c(ke,{style:{width:"100%"}},{default:f(()=>[v("div",Ke,x(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u5546\u54C1\u641C\u7D22":"\uC0C1\uD488\uAC80\uC0C9"),1),c(K),c(b,{class:"absolute-top-right",flat:"",size:"20px",icon:"close",onClick:t[1]||(t[1]=r=>e.searchDialog=!1)}),c(qe,{class:"q-pa-sm","input-class":" text-black",outlined:"",rounded:"",modelValue:e.keyword,"onUpdate:modelValue":t[3]||(t[3]=r=>e.keyword=r),"label-color":"dark",label:e.selected_local.search},{append:f(()=>[e.keyword!==""?(m(),C(se,{key:0,name:"close",onClick:t[2]||(t[2]=r=>e.keyword=""),class:"cursor-pointer"})):Ce("",!0)]),_:1},8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"]),v("div",null,[c(je,{onLoad:e.products_update,offset:500,ref:"infiniteScroll"},{default:f(()=>[(m(!0),S(R,null,j(e.category,r=>(m(),S("div",F({class:"row",key:r.category},r),[c(Ve,{dense:"",class:"col-12 bg-dark text-white"},{default:f(()=>[v("div",{class:$e(r.category)},x(r.category),3),c(K)]),_:2},1024),c(De),(m(!0),S(R,null,j(e.showing_products.filter(o=>o.category==r.category&&o.stored==1&&(o.tag+o.category+o.keyword).toLowerCase().includes(e.keyword.toLowerCase())),o=>(m(),C(y,F({class:[e.list_col_number==3?"col-3":e.list_col_number==4?"col-4":"col-12","q-pa-xs"],key:o.product_id},o,{colNumber:e.list_col_number,onSetbuyoption:u=>o.buyoption=u,onSetquantity:u=>o.quantity=u,onSendOrderItem:u=>this.$store.dispatch("cart/addProductToCart",o),onSendRemoveItem:u=>this.$store.dispatch("cart/removeProductFromCart",o)}),null,16,["class","colNumber","onSetbuyoption","onSetquantity","onSendOrderItem","onSendRemoveItem"]))),128))],16))),128))]),_:1},8,["onLoad"]),v("div",Xe,[e.hasMore?(m(),S("div",Ye,x(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u4E0B\u5212\u66F4\u65B0\u66F4\u591A\u5546\u54C1":"\uC2A4\uD06C\uB864\uD558\uC5EC \uB354 \uB9CE\uC740 \uC0C1\uD488\uC744 \uBD88\uB7EC\uC624\uC138\uC694"),1)):(m(),S("div",Ze,x(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u5546\u54C1\u66F4\u65B0\u5B8C\u6BD5":"\uC0C1\uD488\uC744 \uBAA8\uB450 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4."),1))])]),c(Te,null,{default:f(()=>[v("div",et,[c(V,{label:"\uC0C1\uD638\uBA85","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[tt]),_:1}),c(V,{label:"\uB300\uD45C\uC790","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[ot]),_:1}),c(V,{label:"\uC804\uD654\uBC88\uD638","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[at]),_:1}),c(V,{label:"\uC0AC\uC5C5\uC790\uB4F1\uB85D\uBC88\uD638","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[st]),_:1}),c(V,{label:"\uC0AC\uC5C5\uC7A5 \uC8FC\uC18C","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[nt]),_:1})])]),_:1}),c(Me,{class:"column q-gutter-md",style:{width:"30px"},position:"bottom-right",offset:[60,10]},{default:f(()=>[e.list_col_number==4?(m(),C(b,{key:0,class:"row",color:"dark",size:"20px",onClick:t[5]||(t[5]=r=>e.list_col_number=3),icon:"zoom_in_map",round:""})):(m(),C(b,{key:1,class:"row",color:"dark",size:"20px",onClick:t[6]||(t[6]=r=>e.list_col_number=4),icon:"zoom_out_map",round:""})),c(We,{class:"row",color:"dark",size:"16px","dropdown-icon":"keyboard_arrow_left",rounded:""},{default:f(()=>[(m(!0),S(R,null,j(e.category.slice().sort(),r=>(m(),C(Le,F({key:r.category},r,{dense:"",padding:"xs",color:"dark"}),{default:f(()=>[Ie((m(),C(ze,{clickable:"",onClick:o=>e.handleScroll(r.category)},{default:f(()=>[c(He,null,{default:f(()=>[c(Ee,{class:"dark"},{default:f(()=>[xe(x(r.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Oe]])]),_:2},1040))),128))]),_:1}),c(b,{icon:"keyboard_arrow_up",size:"20px",class:"row bg-dark text-white",round:"",onClick:t[7]||(t[7]=r=>e.go_prev_category())}),c(b,{icon:"keyboard_arrow_down",size:"20px",class:"row bg-dark text-white",round:"",onClick:t[8]||(t[8]=r=>e.go_next_category())})]),_:1})])}var St=pe(Ge,[["render",rt]]);export{St as default};
