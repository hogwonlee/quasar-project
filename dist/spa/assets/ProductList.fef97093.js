import{c as J,r as g,a as B,w as C,aa as re,ab as se,e as ie,o as K,p as ue,h as w,P as X,l as de,ac as T,f as G,t as N,ad as O,s as ce,ae as Y,af as fe,j as ee,ag as te,ah as ge,V as me,g as ve,I as oe,Q as h,ai as be,_ as he,B as ye,C as we,D as Se,E as m,a0 as k,a1 as b,H as d,G as f,aj as _e,a2 as $,ak as ke,al as pe,a4 as Ce,am as qe,F as q,an as Be,ao as R,ap as j,aq as F,ar as Qe,Y as Pe,Z as Ie,a3 as De}from"./index.bc50c282.js";import{Q as Z}from"./QSpace.07d6ebba.js";import{Q as Ve}from"./QBar.49e199fe.js";import{Q as $e,a as L,b as Le}from"./QChip.dde57e9c.js";import{Q as xe,a as Ae}from"./QPageContainer.5685cbd1.js";import{Q as Te}from"./QItemLabel.f14cf2ab.js";import{Q as ze,a as Ee}from"./QItemSection.e6cf4eb7.js";import{Q as He}from"./QBadge.f024c1d2.js";import{C as Me}from"./ClosePopup.ea69cc91.js";import{P as Ne}from"./ProductInfo.aa2ed98a.js";import"./QImg.32e82c9a.js";import"./QToolbarTitle.e0dba22a.js";import"./QToolbar.537c2af2.js";const{passive:p}=de;var Oe=J({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:r}){const s=g(!1),l=g(!0),i=g(null),y=g(null);let n=e.initialIndex||0,o,u;const x=B(()=>"q-infinite-scroll__loading"+(s.value===!0?"":" invisible"));function S(){if(e.disable===!0||s.value===!0||l.value===!1)return;const c=T(o),v=N(o),V=Y(o);e.reverse===!1?Math.round(v+V+e.offset)>=Math.round(c)&&Q():Math.round(v)<=e.offset&&Q()}function Q(){if(e.disable===!0||s.value===!0||l.value===!1)return;n++,s.value=!0;const c=T(o);r("load",n,v=>{l.value===!0&&(s.value=!1,G(()=>{if(e.reverse===!0){const V=T(o),ne=N(o),le=V-c;O(o,ne+le)}v===!0?P():i.value&&i.value.closest("body")&&u()}))})}function E(){n=0}function A(){l.value===!1&&(l.value=!0,o.addEventListener("scroll",u,p)),S()}function P(){l.value===!0&&(l.value=!1,s.value=!1,o.removeEventListener("scroll",u,p),u!==void 0&&u.cancel!==void 0&&u.cancel())}function I(){if(o&&l.value===!0&&o.removeEventListener("scroll",u,p),o=ce(i.value,e.scrollTarget),l.value===!0){if(o.addEventListener("scroll",u,p),e.reverse===!0){const c=T(o),v=Y(o);O(o,c-v)}S()}}function H(c){n=c}function D(c){c=parseInt(c,10);const v=u;u=c<=0?S:fe(S,isNaN(c)===!0?100:c),o&&l.value===!0&&(v!==void 0&&o.removeEventListener("scroll",v,p),o.addEventListener("scroll",u,p))}function _(c){if(a.value===!0){if(y.value===null){c!==!0&&G(()=>{_(!0)});return}const v=`${s.value===!0?"un":""}pauseAnimations`;Array.from(y.value.getElementsByTagName("svg")).forEach(V=>{V[v]()})}}const a=B(()=>e.disable!==!0&&l.value===!0);C([s,a],()=>{_()}),C(()=>e.disable,c=>{c===!0?P():A()}),C(()=>e.reverse,()=>{s.value===!1&&l.value===!0&&S()}),C(()=>e.scrollTarget,I),C(()=>e.debounce,D);let M=!1;re(()=>{M!==!1&&o&&O(o,M)}),se(()=>{M=o?N(o):!1}),ie(()=>{l.value===!0&&o.removeEventListener("scroll",u,p)}),K(()=>{D(e.debounce),I(),s.value===!1&&_()});const ae=ee();return Object.assign(ae.proxy,{poll:()=>{u!==void 0&&u()},trigger:Q,stop:P,reset:E,resume:A,setIndex:H,updateScrollTarget:I}),()=>{const c=ue(t.default,[]);return a.value===!0&&c[e.reverse===!1?"push":"unshift"](w("div",{ref:y,class:x.value},X(t.loading))),w("div",{class:"q-infinite-scroll",ref:i},c)}}});const Re=Object.keys(te);function je(e){return Re.reduce((t,r)=>{const s=e[r];return s!==void 0&&(t[r]=s),t},{})}var Fe=J({name:"QBtnDropdown",props:{...te,...ge,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:r}){const{proxy:s}=ee(),l=g(e.modelValue),i=g(null),y=me(),n=B(()=>{const a={"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":y.value,"aria-label":e.toggleAriaLabel||s.$q.lang.label[l.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(a["aria-disabled"]="true"),a}),o=B(()=>"q-btn-dropdown__arrow"+(l.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=B(()=>ve(e)),x=B(()=>je(e));C(()=>e.modelValue,a=>{i.value!==null&&i.value[a?"show":"hide"]()}),C(()=>e.split,_);function S(a){l.value=!0,r("beforeShow",a)}function Q(a){r("show",a),r("update:modelValue",!0)}function E(a){l.value=!1,r("beforeHide",a)}function A(a){r("hide",a),r("update:modelValue",!1)}function P(a){r("click",a)}function I(a){be(a),_(),r("click",a)}function H(a){i.value!==null&&i.value.toggle(a)}function D(a){i.value!==null&&i.value.show(a)}function _(a){i.value!==null&&i.value.hide(a)}return Object.assign(s,{show:D,hide:_,toggle:H}),K(()=>{e.modelValue===!0&&D()}),()=>{const a=[w(oe,{class:o.value,name:e.dropdownIcon||s.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&a.push(w($e,{ref:i,id:y.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:S,onShow:Q,onBeforeHide:E,onHide:A},t.default)),e.split===!1?w(h,{class:"q-btn-dropdown q-btn-dropdown--simple",...x.value,...n.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:P},{default:()=>X(t.label,[]).concat(a),loading:t.loading}):w(xe,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[w(h,{class:"q-btn-dropdown--current",...x.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:I},{default:t.label,loading:t.loading}),w(h,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...n.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>a)])}}});const{offset:z}=ke,{getScrollTarget:U,setVerticalScrollPosition:W}=pe,Ue=ye({name:"ProductList",components:{ProductInfo:Ne},data:function(){return{}},methods:{go_prev_category(){var e=this.category[0].category,t=0,r=-9999;this.category.forEach(i=>{z(document.querySelector("."+i.category)).top<0&&(t=z(document.querySelector("."+i.category)).top,t>r&&(r=t,e=i.category))});let s=U(document.querySelector("."+e));const l=300;W(s,document.querySelector("."+e).offsetTop-50,l)},go_next_category(){var e,t=0,r=9999;this.category.forEach(i=>{z(document.querySelector("."+i.category)).top>100&&(t=z(document.querySelector("."+i.category)).top,t<r&&(r=t,e=i.category))});let s=U(document.querySelector("."+e));const l=300;W(s,document.querySelector("."+e).offsetTop-50,l)},handleScroll(e){let t=document.querySelector("."+e),r=U(t),s=t.offsetTop-50;W(r,s,300)},setproductbuyoption(e,t){e.buyoption=t},async products_update(e,t){console.log("\uC2A4\uD06C\uB864 \uB85C\uB529\uC911: "+this.page+" / index: "+e);const r=(e-1)*24,s=r+24,l=this.products.slice(r,s);if(l.length===0){this.hasMore=!1,t(!0);return}this.showing_products.push(...l),t()}},computed:{...we({checkoutStatus:e=>e.cart.checkoutStatus,category:e=>e.category.items,products:e=>e.products.all,storeversion:e=>e.products.version,products_status:e=>e.products.status,selected_local:e=>e.ui_local.status})},mounted(){this.showing_products.length===0&&this.infiniteScroll&&this.infiniteScroll.trigger()},setup(){const e=g([]),t=g(null),r=g(!0);return{childbuyoption:g("one"),keyword:g(""),event_fab:g(!1),visible:g(!0),showSimulatedReturnData:g(!1),list_col_number:g(4),searchDialog:g(!1),page:g(0),showing_products:e,infiniteScroll:t,hasMore:r}}}),We={class:"fixed-top-right z-top q-ma-xs row q-gutter-sm"},Ge={class:"text-h2"},Ye={class:"text-orange text-bold row justify-center"},Ze={key:0},Je={key:1,class:"text-positive"},Ke={class:"q-gutter-md row inline"},Xe=b("div",null,"\uC911\uAD6D\uC2DD\uD488\uC628\uB77C\uC778",-1),et=b("div",null,"\uC774\uD638\uAD8C",-1),tt=b("div",null,"010-8492-0526",-1),ot=b("div",null,"306-37-32411",-1),at=b("div",null,"\uACBD\uAE30\uB3C4 \uBD80\uCC9C\uC2DC \uC6D0\uBBF8\uAD6C \uBD80\uCC9C\uB85C47\uBC88\uAE38 9, \uC911\uC559\uC790\uC720\uC2DC\uC7A5 15\uD638",-1);function nt(e,t,r,s,l,i){const y=Se("ProductInfo");return m(),k("div",null,[b("div",We,[d(h,{icon:"search",size:"12px",flat:"",outline:"",onClick:t[0]||(t[0]=n=>e.searchDialog=!0)})]),d(_e,{class:"z-max",modelValue:e.searchDialog,"onUpdate:modelValue":t[4]||(t[4]=n=>e.searchDialog=n),position:"top"},{default:f(()=>[d(Ce,{style:{width:"100%"}},{default:f(()=>[b("div",Ge,$(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u5546\u54C1\u641C\u7D22":"\uC0C1\uD488\uAC80\uC0C9"),1),d(Z),d(h,{class:"absolute-top-right",flat:"",size:"20px",icon:"close",onClick:t[1]||(t[1]=n=>e.searchDialog=!1)}),d(qe,{class:"q-pa-sm","input-class":" text-black",outlined:"",rounded:"",modelValue:e.keyword,"onUpdate:modelValue":t[3]||(t[3]=n=>e.keyword=n),"label-color":"dark",label:e.selected_local.search},{append:f(()=>[e.keyword!==""?(m(),q(oe,{key:0,name:"close",onClick:t[2]||(t[2]=n=>e.keyword=""),class:"cursor-pointer"})):Be("",!0)]),_:1},8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"]),b("div",null,[d(Oe,{onLoad:e.products_update,offset:100,ref:"infiniteScroll"},{default:f(()=>[(m(!0),k(R,null,j(e.category,n=>(m(),k("div",F({class:"row",key:n.category},n),[d(Ve,{dense:"",class:"col-12 bg-dark text-white"},{default:f(()=>[b("div",{class:Qe(n.category)},$(n.category),3),d(Z)]),_:2},1024),d(Pe),(m(!0),k(R,null,j(e.showing_products.filter(o=>o.category==n.category&&o.stored==1&&(o.tag+o.category+o.keyword).toLowerCase().includes(e.keyword.toLowerCase())),o=>(m(),q(y,F({class:[e.list_col_number==3?"col-3":e.list_col_number==4?"col-4":"col-12","q-pa-xs"],key:o.product_id},o,{colNumber:e.list_col_number,onSetbuyoption:u=>o.buyoption=u,onSetquantity:u=>o.quantity=u,onSendOrderItem:u=>this.$store.dispatch("cart/addProductToCart",o),onSendRemoveItem:u=>this.$store.dispatch("cart/removeProductFromCart",o)}),null,16,["class","colNumber","onSetbuyoption","onSetquantity","onSendOrderItem","onSendRemoveItem"]))),128))],16))),128))]),_:1},8,["onLoad"]),b("div",Ye,[e.hasMore?(m(),k("div",Ze,$(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u4E0B\u5212\u66F4\u65B0\u66F4\u591A\u5546\u54C1":"\uC2A4\uD06C\uB864\uD558\uC5EC \uB354 \uB9CE\uC740 \uC0C1\uD488\uC744 \uBD88\uB7EC\uC624\uC138\uC694"),1)):(m(),k("div",Je,$(e.selected_local.chinafood=="\u6D3D\u6D3D\u4E2D\u56FD\u98DF\u54C1"?"\u5546\u54C1\u66F4\u65B0\u5B8C\u6BD5":"\uC0C1\uD488\uC744 \uBAA8\uB450 \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4."),1))])]),d(Ae,null,{default:f(()=>[b("div",Ke,[d(L,{label:"\uC0C1\uD638\uBA85","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[Xe]),_:1}),d(L,{label:"\uB300\uD45C\uC790","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[et]),_:1}),d(L,{label:"\uC804\uD654\uBC88\uD638","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[tt]),_:1}),d(L,{label:"\uC0AC\uC5C5\uC790\uB4F1\uB85D\uBC88\uD638","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[ot]),_:1}),d(L,{label:"\uC0AC\uC5C5\uC7A5 \uC8FC\uC18C","stack-label":"",style:{"max-width":"fit-content"}},{control:f(()=>[at]),_:1})])]),_:1}),d(He,{class:"column q-gutter-md",style:{width:"30px"},position:"bottom-right",offset:[60,10]},{default:f(()=>[e.list_col_number==4?(m(),q(h,{key:0,class:"row",color:"dark",size:"20px",onClick:t[5]||(t[5]=n=>e.list_col_number=3),icon:"zoom_in_map",round:""})):(m(),q(h,{key:1,class:"row",color:"dark",size:"20px",onClick:t[6]||(t[6]=n=>e.list_col_number=4),icon:"zoom_out_map",round:""})),d(Fe,{class:"row",color:"dark",size:"16px","dropdown-icon":"keyboard_arrow_left",rounded:""},{default:f(()=>[(m(!0),k(R,null,j(e.category.slice().sort(),n=>(m(),q(Le,F({key:n.category},n,{dense:"",padding:"xs",color:"dark"}),{default:f(()=>[Ie((m(),q(ze,{clickable:"",onClick:o=>e.handleScroll(n.category)},{default:f(()=>[d(Ee,null,{default:f(()=>[d(Te,{class:"dark"},{default:f(()=>[De($(n.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Me]])]),_:2},1040))),128))]),_:1}),d(h,{icon:"keyboard_arrow_up",size:"20px",class:"row bg-dark text-white",round:"",onClick:t[7]||(t[7]=n=>e.go_prev_category())}),d(h,{icon:"keyboard_arrow_down",size:"20px",class:"row bg-dark text-white",round:"",onClick:t[8]||(t[8]=n=>e.go_next_category())})]),_:1})])}var yt=he(Ue,[["render",nt]]);export{yt as default};
